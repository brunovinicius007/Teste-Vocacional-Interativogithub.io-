<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Teste Vocacional</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        .question-card {
            transform: scale(0.95);
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        .question-card.active {
            transform: scale(1);
            opacity: 1;
        }
        .chart-container {
            height: 400px;
        }
        .option-btn {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .option-btn.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .admin-header {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
        }
        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-lg border-b border-white border-opacity-20">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-graduation-cap text-2xl text-white"></i>
                    <h1 class="text-2xl font-bold text-white">Teste Vocacional</h1>
                </div>
                <button onclick="toggleAdmin()" class="text-white hover:text-gray-200 transition-colors">
                    <i class="fas fa-user-cog mr-2"></i>Admin
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        
        <!-- Home Page -->
        <div id="homePage" class="max-w-4xl mx-auto">
            <div class="card rounded-2xl p-8 text-center shadow-2xl">
                <div class="mb-8">
                    <i class="fas fa-compass text-6xl text-indigo-600 mb-4"></i>
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Descubra Sua Vocação</h2>
                    <p class="text-xl text-gray-600 mb-8">
                        Um teste completo para ajudar você a descobrir qual área combina mais com seu perfil
                    </p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <div class="text-left">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">
                            <i class="fas fa-check-circle text-indigo-600 mr-2"></i>
                            O que você vai descobrir:
                        </h3>
                        <ul class="space-y-2 text-gray-600">
                            <li><i class="fas fa-arrow-right text-indigo-500 mr-2"></i>Seu perfil vocacional dominante</li>
                            <li><i class="fas fa-arrow-right text-indigo-500 mr-2"></i>Áreas de maior afinidade</li>
                            <li><i class="fas fa-arrow-right text-indigo-500 mr-2"></i>Sugestões de carreiras</li>
                            <li><i class="fas fa-arrow-right text-indigo-500 mr-2"></i>Próximos passos recomendados</li>
                        </ul>
                    </div>
                    <div class="text-left">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">
                            <i class="fas fa-clock text-indigo-600 mr-2"></i>
                            Informações importantes:
                        </h3>
                        <ul class="space-y-2 text-gray-600">
                            <li><i class="fas fa-hourglass-half text-indigo-500 mr-2"></i>Tempo estimado: 10-15 minutos</li>
                            <li><i class="fas fa-question-circle text-indigo-500 mr-2"></i>12 perguntas cuidadosamente elaboradas</li>
                            <li><i class="fas fa-shield-alt text-indigo-500 mr-2"></i>Seus dados são seguros</li>
                            <li><i class="fas fa-mobile-alt text-indigo-500 mr-2"></i>Funciona em qualquer dispositivo</li>
                        </ul>
                    </div>
                </div>
                
                <button onclick="startTest()" class="btn-primary text-white font-semibold py-4 px-8 rounded-xl text-lg shadow-lg hover:shadow-xl">
                    <i class="fas fa-play mr-2"></i>
                    Começar Teste Agora
                </button>
            </div>
        </div>

        <!-- Personal Info Form -->
        <div id="personalInfoPage" class="max-w-2xl mx-auto hidden">
            <div class="card rounded-2xl p-8 shadow-2xl">
                <div class="text-center mb-8">
                    <i class="fas fa-user-edit text-4xl text-indigo-600 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Informações Pessoais</h2>
                    <p class="text-gray-600">Precisamos de algumas informações básicas para personalizar seu resultado</p>
                </div>

                <form id="personalInfoForm" class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-user mr-2"></i>Nome Completo
                            </label>
                            <input type="text" id="nome" required 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-birthday-cake mr-2"></i>Idade
                            </label>
                            <input type="number" id="idade" min="14" max="50" required 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-venus-mars mr-2"></i>Sexo
                            </label>
                            <select id="sexo" required 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                <option value="">Selecione...</option>
                                <option value="masculino">Masculino</option>
                                <option value="feminino">Feminino</option>
                                <option value="outro">Outro</option>
                                <option value="nao-informar">Prefiro não informar</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-phone mr-2"></i>Telefone (opcional)
                            </label>
                            <input type="tel" id="telefone" placeholder="(11) 99999-9999"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-envelope mr-2"></i>E-mail (opcional)
                        </label>
                        <input type="email" id="email" placeholder="seu@email.com"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>

                    <div class="flex justify-between pt-6">
                        <button type="button" onclick="goToHome()" 
                                class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                            <i class="fas fa-arrow-left mr-2"></i>Voltar
                        </button>
                        <button type="submit" 
                                class="btn-primary text-white font-semibold py-3 px-8 rounded-lg shadow-lg">
                            <i class="fas fa-arrow-right mr-2"></i>Continuar
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Quiz Page -->
        <div id="quizPage" class="max-w-4xl mx-auto hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-white font-medium">Progresso do Teste</span>
                    <span id="progressText" class="text-white font-medium">1 / 12</span>
                </div>
                <div class="w-full bg-white bg-opacity-20 rounded-full h-3">
                    <div id="progressBar" class="progress-bar h-3 rounded-full transition-all duration-500" style="width: 8.33%"></div>
                </div>
            </div>

            <div id="questionContainer" class="question-card card rounded-2xl p-8 shadow-2xl active">
                <!-- Questions will be loaded here -->
            </div>

            <div class="flex justify-between mt-6">
                <button id="prevBtn" onclick="previousQuestion()" 
                        class="px-6 py-3 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors hidden">
                    <i class="fas fa-arrow-left mr-2"></i>Anterior
                </button>
                <button id="nextBtn" onclick="nextQuestion()" 
                        class="px-6 py-3 btn-primary text-white rounded-lg shadow-lg ml-auto">
                    Próxima <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Results Page -->
        <div id="resultsPage" class="max-w-4xl mx-auto hidden">
            <div class="card rounded-2xl p-8 shadow-2xl">
                <div class="text-center mb-8">
                    <i class="fas fa-trophy text-6xl text-yellow-500 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Seus Resultados</h2>
                    <p class="text-gray-600">Descobrimos seu perfil vocacional!</p>
                </div>

                <div id="resultsContent">
                    <!-- Results will be displayed here -->
                </div>

                <div class="text-center mt-8">
                    <button onclick="goToHome()" 
                            class="btn-primary text-white font-semibold py-3 px-8 rounded-lg shadow-lg mr-4">
                        <i class="fas fa-home mr-2"></i>Início
                    </button>
                    <button onclick="restartTest()" 
                            class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                        <i class="fas fa-redo mr-2"></i>Fazer Novamente
                    </button>
                </div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminPanel" class="hidden">
            <div class="admin-header rounded-t-2xl p-6 text-white">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="text-2xl font-bold">
                            <i class="fas fa-chart-line mr-2"></i>Painel Administrativo
                        </h2>
                        <p class="text-gray-300">Visualize e analise os resultados dos testes</p>
                    </div>
                    <button onclick="closeAdmin()" class="text-white hover:text-gray-300">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-b-2xl p-6 shadow-2xl">
                <!-- Admin Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-100">Total de Testes</p>
                                <p id="totalTests" class="text-2xl font-bold">0</p>
                            </div>
                            <i class="fas fa-clipboard-list text-3xl text-blue-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-100">Perfil Mais Comum</p>
                                <p id="mostCommonProfile" class="text-lg font-bold">-</p>
                            </div>
                            <i class="fas fa-star text-3xl text-green-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-100">Idade Média</p>
                                <p id="averageAge" class="text-2xl font-bold">0</p>
                            </div>
                            <i class="fas fa-users text-3xl text-purple-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-100">Hoje</p>
                                <p id="todayTests" class="text-2xl font-bold">0</p>
                            </div>
                            <i class="fas fa-calendar-day text-3xl text-orange-200"></i>
                        </div>
                    </div>
                </div>

                <!-- Filters -->
                <div class="bg-gray-50 rounded-xl p-6 mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">
                        <i class="fas fa-filter mr-2"></i>Filtros
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Perfil</label>
                            <select id="filterProfile" onchange="applyFilters()" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                <option value="">Todos</option>
                                <option value="exatas">Exatas</option>
                                <option value="humanas">Humanas</option>
                                <option value="biologicas">Biológicas</option>
                                <option value="artes">Artes</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Idade Mín.</label>
                            <input type="number" id="filterMinAge" onchange="applyFilters()" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Idade Máx.</label>
                            <input type="number" id="filterMaxAge" onchange="applyFilters()" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Sexo</label>
                            <select id="filterSex" onchange="applyFilters()" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                <option value="">Todos</option>
                                <option value="masculino">Masculino</option>
                                <option value="feminino">Feminino</option>
                                <option value="outro">Outro</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Distribuição de Perfis</h3>
                        <div class="chart-container">
                            <canvas id="profileChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Distribuição por Idade</h3>
                        <div class="chart-container">
                            <canvas id="ageChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Results Table -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="p-6 border-b">
                        <h3 class="text-lg font-semibold text-gray-800">
                            <i class="fas fa-table mr-2"></i>Resultados Detalhados
                        </h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nome</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Idade</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Sexo</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Perfil</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Data</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="resultsTable" class="bg-white divide-y divide-gray-200">
                                <!-- Results will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Individual Report Modal -->
        <div id="reportModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
            <div class="flex items-center justify-center min-h-screen px-4">
                <div class="bg-white rounded-2xl p-8 max-w-4xl w-full max-h-screen overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">
                            <i class="fas fa-user-circle mr-2"></i>Relatório Individual
                        </h2>
                        <button onclick="closeReportModal()" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <div id="reportContent">
                        <!-- Report content will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Global variables
        let currentQuestion = 0;
        let userAnswers = {};
        let userData = {};
        let allTests = JSON.parse(localStorage.getItem('vocationalTests') || '[]');
        
        // Quiz questions
        const questions = [
            {
                question: "No seu tempo livre, o que você mais gosta de fazer?",
                options: [
                    { text: "Resolver quebra-cabeças, jogar jogos de estratégia ou programar", profile: "exatas" },
                    { text: "Ler sobre história, debater atualidades ou escrever textos", profile: "humanas" },
                    { text: "Cuidar de plantas/animais, fazer trilhas ou aprender sobre o corpo humano", profile: "biologicas" },
                    { text: "Desenhar, tocar um instrumento, fotografar ou criar algo novo", profile: "artes" }
                ]
            },
            {
                question: "Se um grupo precisa de ajuda para organizar um projeto, qual seria sua principal contribuição?",
                options: [
                    { text: "Criar uma planilha detalhada com cronograma e análise de dados", profile: "exatas" },
                    { text: "Pesquisar o contexto, coordenar as pessoas e garantir boa comunicação", profile: "humanas" },
                    { text: "Planejar as atividades práticas e cuidar dos aspectos de saúde/bem-estar", profile: "biologicas" },
                    { text: "Criar a identidade visual do projeto e pensar em formas criativas de apresentação", profile: "artes" }
                ]
            },
            {
                question: "Qual tipo de filme ou série mais te atrai?",
                options: [
                    { text: "Ficção científica com tecnologias complexas e dilemas lógicos", profile: "exatas" },
                    { text: "Dramas históricos, documentários sociais ou thrillers políticos", profile: "humanas" },
                    { text: "Documentários sobre vida selvagem, natureza ou dramas médicos", profile: "biologicas" },
                    { text: "Filmes com fotografia impecável, animações ou musicais", profile: "artes" }
                ]
            },
            {
                question: "Na escola, qual área te deixava mais à vontade?",
                options: [
                    { text: "Matemática, Física e Química", profile: "exatas" },
                    { text: "História, Geografia, Sociologia e Português", profile: "humanas" },
                    { text: "Biologia, Educação Física e Ciências", profile: "biologicas" },
                    { text: "Artes, Literatura e Música", profile: "artes" }
                ]
            },
            {
                question: "Qual problema você sentiria mais satisfação em resolver?",
                options: [
                    { text: "Desenvolver um aplicativo que otimiza processos empresariais", profile: "exatas" },
                    { text: "Mediar conflitos entre grupos com opiniões diferentes", profile: "humanas" },
                    { text: "Encontrar formas de proteger espécies em extinção", profile: "biologicas" },
                    { text: "Criar uma campanha visual para uma causa social importante", profile: "artes" }
                ]
            },
            {
                question: "Como você prefere aprender algo novo?",
                options: [
                    { text: "Entendendo a lógica e estrutura por trás do conceito", profile: "exatas" },
                    { text: "Lendo, discutindo e conectando com contexto social/histórico", profile: "humanas" },
                    { text: "Observando na prática, experimentando e interagindo", profile: "biologicas" },
                    { text: "De forma intuitiva, através de imagens, sons e sensações", profile: "artes" }
                ]
            },
            {
                question: "Qual ambiente de trabalho te parece mais interessante?",
                options: [
                    { text: "Laboratório de tecnologia, escritório de engenharia ou startup", profile: "exatas" },
                    { text: "ONG, escritório de advocacia, redação de jornal ou sala de aula", profile: "humanas" },
                    { text: "Hospital, laboratório de pesquisa, parque ecológico ou consultório", profile: "biologicas" },
                    { text: "Estúdio de design, agência de publicidade, ateliê ou palco", profile: "artes" }
                ]
            },
            {
                question: "O que é mais importante para você em uma futura carreira?",
                options: [
                    { text: "Resolver desafios lógicos, inovar e criar soluções eficientes", profile: "exatas" },
                    { text: "Ajudar pessoas, entender a sociedade e promover o diálogo", profile: "humanas" },
                    { text: "Cuidar da saúde e bem-estar dos seres vivos e do planeta", profile: "biologicas" },
                    { text: "Expressar ideias, emoções e criar beleza no mundo", profile: "artes" }
                ]
            },
            {
                question: "Em um trabalho em grupo, você naturalmente tende a:",
                options: [
                    { text: "Organizar dados, fazer cálculos e criar sistemas eficientes", profile: "exatas" },
                    { text: "Liderar discussões, mediar conflitos e integrar diferentes perspectivas", profile: "humanas" },
                    { text: "Cuidar do bem-estar do grupo e propor atividades práticas", profile: "biologicas" },
                    { text: "Criar apresentações visuais e pensar em formas criativas de comunicação", profile: "artes" }
                ]
            },
            {
                question: "Qual dessas atividades você faria por prazer?",
                options: [
                    { text: "Montar um computador ou resolver um problema de programação", profile: "exatas" },
                    { text: "Escrever um artigo de opinião ou participar de um debate", profile: "humanas" },
                    { text: "Fazer uma horta ou cuidar de animais", profile: "biologicas" },
                    { text: "Criar um vídeo, pintar um quadro ou compor uma música", profile: "artes" }
                ]
            },
            {
                question: "Se você pudesse mudar algo no mundo, seria:",
                options: [
                    { text: "Desenvolver tecnologias para tornar a vida mais eficiente", profile: "exatas" },
                    { text: "Promover justiça social e igualdade entre as pessoas", profile: "humanas" },
                    { text: "Proteger o meio ambiente e promover saúde para todos", profile: "biologicas" },
                    { text: "Tornar o mundo mais belo e inspirador através da arte", profile: "artes" }
                ]
            },
            {
                question: "Qual frase mais se identifica com você?",
                options: [
                    { text: "Gosto de entender como as coisas funcionam e encontrar soluções lógicas", profile: "exatas" },
                    { text: "Me interesso por pessoas, culturas e questões sociais", profile: "humanas" },
                    { text: "Tenho paixão pela natureza e me preocupo com a saúde e bem-estar", profile: "biologicas" },
                    { text: "Vejo beleza em tudo e gosto de expressar minha criatividade", profile: "artes" }
                ]
            }
        ];

        // Profile descriptions
        const profileDescriptions = {
            exatas: {
                title: "Perfil Exatas",
                icon: "fas fa-calculator",
                color: "blue",
                description: "Você tem afinidade com números, lógica e tecnologia. Gosta de resolver problemas de forma sistemática e encontrar soluções eficientes.",
                careers: [
                    "Engenharia (todas as áreas)",
                    "Ciência da Computação",
                    "Matemática",
                    "Física",
                    "Arquitetura",
                    "Economia",
                    "Análise de Dados",
                    "Pesquisa e Desenvolvimento"
                ],
                nextSteps: [
                    "Explore linguagens de programação",
                    "Participe de olimpíadas de matemática",
                    "Considere cursos técnicos em TI",
                    "Visite universidades com cursos de engenharia"
                ]
            },
            humanas: {
                title: "Perfil Humanas",
                icon: "fas fa-users",
                color: "green",
                description: "Você se interessa por pessoas, sociedade e cultura. Tem facilidade com comunicação e gosta de entender o comportamento humano.",
                careers: [
                    "Direito",
                    "Psicologia",
                    "Jornalismo",
                    "Relações Internacionais",
                    "Pedagogia",
                    "Serviço Social",
                    "Administração",
                    "Recursos Humanos"
                ],
                nextSteps: [
                    "Participe de debates e grupos de discussão",
                    "Leia sobre atualidades e história",
                    "Considere fazer um curso de oratória",
                    "Explore atividades de voluntariado"
                ]
            },
            biologicas: {
                title: "Perfil Biológicas",
                icon: "fas fa-leaf",
                color: "emerald",
                description: "Você tem interesse pela vida, saúde e natureza. Gosta de cuidar e tem preocupação com o bem-estar dos seres vivos.",
                careers: [
                    "Medicina",
                    "Enfermagem",
                    "Biologia",
                    "Veterinária",
                    "Farmácia",
                    "Fisioterapia",
                    "Nutrição",
                    "Ciências Ambientais"
                ],
                nextSteps: [
                    "Visite hospitais e clínicas",
                    "Participe de projetos ambientais",
                    "Estude anatomia e fisiologia",
                    "Considere cursos técnicos em saúde"
                ]
            },
            artes: {
                title: "Perfil Artes",
                icon: "fas fa-palette",
                color: "purple",
                description: "Você tem senso estético apurado e gosta de criar. Vê beleza no mundo e tem facilidade para expressar ideias de forma criativa.",
                careers: [
                    "Design Gráfico",
                    "Arquitetura",
                    "Publicidade",
                    "Artes Visuais",
                    "Música",
                    "Cinema",
                    "Moda",
                    "Comunicação Visual"
                ],
                nextSteps: [
                    "Desenvolva seu portfólio criativo",
                    "Aprenda software de design",
                    "Visite museus e exposições",
                    "Participe de workshops artísticos"
                ]
            }
        };

        // Navigation functions
        function startTest() {
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('personalInfoPage').classList.remove('hidden');
        }

        function goToHome() {
            document.getElementById('personalInfoPage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById('homePage').classList.remove('hidden');
        }

        function restartTest() {
            currentQuestion = 0;
            userAnswers = {};
            userData = {};
            goToHome();
        }

        // Personal info form handling
        document.getElementById('personalInfoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            userData = {
                nome: document.getElementById('nome').value,
                idade: parseInt(document.getElementById('idade').value),
                sexo: document.getElementById('sexo').value,
                telefone: document.getElementById('telefone').value,
                email: document.getElementById('email').value
            };
            
            document.getElementById('personalInfoPage').classList.add('hidden');
            document.getElementById('quizPage').classList.remove('hidden');
            loadQuestion();
        });

        // Quiz functions
        function loadQuestion() {
            const question = questions[currentQuestion];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">
                        Pergunta ${currentQuestion + 1} de ${questions.length}
                    </h3>
                    <p class="text-lg text-gray-700">${question.question}</p>
                </div>
                <div class="grid grid-cols-1 gap-4">
                    ${question.options.map((option, index) => `
                        <button class="option-btn p-4 text-left bg-gray-50 rounded-xl hover:bg-gray-100 transition-all duration-300" 
                                onclick="selectAnswer('${option.profile}', ${index})">
                            <div class="flex items-center">
                                <div class="w-6 h-6 border-2 border-gray-300 rounded-full mr-4 flex items-center justify-center option-radio">
                                    <div class="w-3 h-3 bg-indigo-600 rounded-full hidden option-dot"></div>
                                </div>
                                <span class="text-gray-800">${option.text}</span>
                            </div>
                        </button>
                    `).join('')}
                </div>
            `;
            
            // Update progress
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentQuestion + 1} / ${questions.length}`;
            
            // Update navigation buttons
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestion === 0);
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'Finalizar' : 'Próxima';
            document.getElementById('nextBtn').innerHTML = currentQuestion === questions.length - 1 ? 
                'Finalizar <i class="fas fa-check ml-2"></i>' : 
                'Próxima <i class="fas fa-arrow-right ml-2"></i>';
            
            // Show previous answer if exists
            if (userAnswers[currentQuestion] !== undefined) {
                const buttons = container.querySelectorAll('.option-btn');
                const selectedIndex = questions[currentQuestion].options.findIndex(opt => opt.profile === userAnswers[currentQuestion]);
                if (selectedIndex >= 0) {
                    selectAnswerVisual(buttons[selectedIndex]);
                }
            }
        }

        function selectAnswer(profile, index) {
            userAnswers[currentQuestion] = profile;
            const buttons = document.querySelectorAll('.option-btn');
            selectAnswerVisual(buttons[index]);
        }

        function selectAnswerVisual(selectedButton) {
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
                btn.querySelector('.option-dot').classList.add('hidden');
            });
            selectedButton.classList.add('selected');
            selectedButton.querySelector('.option-dot').classList.remove('hidden');
        }

        function nextQuestion() {
            if (userAnswers[currentQuestion] === undefined) {
                alert('Por favor, selecione uma resposta antes de continuar.');
                return;
            }
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                finishTest();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function finishTest() {
            // Calculate results
            const scores = { exatas: 0, humanas: 0, biologicas: 0, artes: 0 };
            
            Object.values(userAnswers).forEach(answer => {
                scores[answer]++;
            });
            
            // Find dominant profile
            const maxScore = Math.max(...Object.values(scores));
            const dominantProfiles = Object.keys(scores).filter(key => scores[key] === maxScore);
            const primaryProfile = dominantProfiles[0];
            
            // Save test result
            const testResult = {
                id: Date.now(),
                ...userData,
                answers: userAnswers,
                scores: scores,
                primaryProfile: primaryProfile,
                dominantProfiles: dominantProfiles,
                date: new Date().toISOString(),
                timestamp: Date.now()
            };
            
            allTests.push(testResult);
            localStorage.setItem('vocationalTests', JSON.stringify(allTests));
            
            // Show results
            showResults(testResult);
        }

        function showResults(result) {
            const profile = profileDescriptions[result.primaryProfile];
            const resultsContent = document.getElementById('resultsContent');
            
            resultsContent.innerHTML = `
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-${profile.color}-100 rounded-full mb-4">
                        <i class="${profile.icon} text-3xl text-${profile.color}-600"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">${profile.title}</h3>
                    <p class="text-gray-600 max-w-2xl mx-auto">${profile.description}</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <div class="bg-gradient-to-r from-${profile.color}-50 to-${profile.color}-100 rounded-xl p-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">
                            <i class="fas fa-briefcase mr-2"></i>Carreiras Sugeridas
                        </h4>
                        <div class="grid grid-cols-1 gap-2">
                            ${profile.careers.map(career => `
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check text-${profile.color}-600 mr-2"></i>
                                    <span>${career}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">
                            <i class="fas fa-route mr-2"></i>Próximos Passos
                        </h4>
                        <div class="space-y-2">
                            ${profile.nextSteps.map(step => `
                                <div class="flex items-start text-gray-700">
                                    <i class="fas fa-arrow-right text-${profile.color}-600 mr-2 mt-1"></i>
                                    <span>${step}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="bg-white border-2 border-${profile.color}-200 rounded-xl p-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">
                        <i class="fas fa-chart-pie mr-2"></i>Sua Distribuição de Perfis
                    </h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        ${Object.entries(result.scores).map(([key, value]) => {
                            const desc = profileDescriptions[key];
                            const percentage = Math.round((value / questions.length) * 100);
                            return `
                                <div class="text-center">
                                    <div class="w-16 h-16 mx-auto mb-2 rounded-full bg-${desc.color}-100 flex items-center justify-center">
                                        <i class="${desc.icon} text-${desc.color}-600"></i>
                                    </div>
                                    <div class="text-2xl font-bold text-gray-800">${percentage}%</div>
                                    <div class="text-sm text-gray-600">${desc.title.replace('Perfil ', '')}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.remove('hidden');
        }

        // Admin functions
        function toggleAdmin() {
            const password = prompt('Digite a senha de administrador:');
            if (password === 'admin123') {
                showAdmin();
            } else if (password !== null) {
                alert('Senha incorreta!');
            }
        }

        function showAdmin() {
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('personalInfoPage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById('adminPanel').classList.remove('hidden');
            
            loadAdminData();
        }

        function closeAdmin() {
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('homePage').classList.remove('hidden');
        }

        function loadAdminData() {
            updateAdminStats();
            updateAdminCharts();
            updateResultsTable();
        }

        function updateAdminStats() {
            const today = new Date().toDateString();
            const todayTests = allTests.filter(test => new Date(test.date).toDateString() === today);
            
            document.getElementById('totalTests').textContent = allTests.length;
            document.getElementById('todayTests').textContent = todayTests.length;
            
            if (allTests.length > 0) {
                // Most common profile
                const profileCounts = {};
                allTests.forEach(test => {
                    profileCounts[test.primaryProfile] = (profileCounts[test.primaryProfile] || 0) + 1;
                });
                const mostCommon = Object.keys(profileCounts).reduce((a, b) => 
                    profileCounts[a] > profileCounts[b] ? a : b
                );
                document.getElementById('mostCommonProfile').textContent = 
                    profileDescriptions[mostCommon].title.replace('Perfil ', '');
                
                // Average age
                const avgAge = Math.round(allTests.reduce((sum, test) => sum + test.idade, 0) / allTests.length);
                document.getElementById('averageAge').textContent = avgAge;
            }
        }

        function updateAdminCharts() {
            // Profile distribution chart
            const profileCounts = { exatas: 0, humanas: 0, biologicas: 0, artes: 0 };
            allTests.forEach(test => {
                profileCounts[test.primaryProfile]++;
            });
            
            const profileCtx = document.getElementById('profileChart').getContext('2d');
            new Chart(profileCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Exatas', 'Humanas', 'Biológicas', 'Artes'],
                    datasets: [{
                        data: [profileCounts.exatas, profileCounts.humanas, profileCounts.biologicas, profileCounts.artes],
                        backgroundColor: ['#3B82F6', '#10B981', '#059669', '#8B5CF6']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Age distribution chart
            const ageCounts = {};
            allTests.forEach(test => {
                const ageGroup = Math.floor(test.idade / 5) * 5;
                const ageLabel = `${ageGroup}-${ageGroup + 4}`;
                ageCounts[ageLabel] = (ageCounts[ageLabel] || 0) + 1;
            });
            
            const ageCtx = document.getElementById('ageChart').getContext('2d');
            new Chart(ageCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(ageCounts),
                    datasets: [{
                        label: 'Quantidade',
                        data: Object.values(ageCounts),
                        backgroundColor: '#667eea'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function applyFilters() {
            updateResultsTable();
        }

        function updateResultsTable() {
            const filterProfile = document.getElementById('filterProfile').value;
            const filterMinAge = parseInt(document.getElementById('filterMinAge').value) || 0;
            const filterMaxAge = parseInt(document.getElementById('filterMaxAge').value) || 999;
            const filterSex = document.getElementById('filterSex').value;
            
            let filteredTests = allTests.filter(test => {
                return (!filterProfile || test.primaryProfile === filterProfile) &&
                       (test.idade >= filterMinAge && test.idade <= filterMaxAge) &&
                       (!filterSex || test.sexo === filterSex);
            });
            
            const tbody = document.getElementById('resultsTable');
            tbody.innerHTML = filteredTests.map(test => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${test.nome}</div>
                        <div class="text-sm text-gray-500">${test.email || 'N/A'}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${test.idade}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${test.sexo}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-${profileDescriptions[test.primaryProfile].color}-100 text-${profileDescriptions[test.primaryProfile].color}-800">
                            ${profileDescriptions[test.primaryProfile].title}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        ${new Date(test.date).toLocaleDateString('pt-BR')}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="showIndividualReport(${test.id})" 
                                class="text-indigo-600 hover:text-indigo-900 mr-3">
                            <i class="fas fa-eye mr-1"></i>Ver
                        </button>
                        <button onclick="deleteTest(${test.id})" 
                                class="text-red-600 hover:text-red-900">
                            <i class="fas fa-trash mr-1"></i>Excluir
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function showIndividualReport(testId) {
            const test = allTests.find(t => t.id === testId);
            if (!test) return;
            
            const profile = profileDescriptions[test.primaryProfile];
            const reportContent = document.getElementById('reportContent');
            
            reportContent.innerHTML = `
                <div class="bg-gradient-to-r from-${profile.color}-50 to-${profile.color}-100 rounded-xl p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 bg-${profile.color}-200 rounded-full flex items-center justify-center mr-4">
                            <i class="${profile.icon} text-2xl text-${profile.color}-700"></i>
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-gray-800">${test.nome}</h3>
                            <p class="text-gray-600">${profile.title} • ${test.idade} anos • ${test.sexo}</p>
                        </div>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-white border rounded-xl p-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Informações Pessoais</h4>
                        <div class="space-y-2 text-sm">
                            <div><strong>Nome:</strong> ${test.nome}</div>
                            <div><strong>Idade:</strong> ${test.idade} anos</div>
                            <div><strong>Sexo:</strong> ${test.sexo}</div>
                            <div><strong>Telefone:</strong> ${test.telefone || 'Não informado'}</div>
                            <div><strong>E-mail:</strong> ${test.email || 'Não informado'}</div>
                            <div><strong>Data do teste:</strong> ${new Date(test.date).toLocaleString('pt-BR')}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white border rounded-xl p-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Distribuição de Respostas</h4>
                        <div class="space-y-3">
                            ${Object.entries(test.scores).map(([key, value]) => {
                                const desc = profileDescriptions[key];
                                const percentage = Math.round((value / questions.length) * 100);
                                return `
                                    <div>
                                        <div class="flex justify-between items-center mb-1">
                                            <span class="text-sm font-medium text-gray-700">${desc.title}</span>
                                            <span class="text-sm text-gray-600">${percentage}%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-${desc.color}-600 h-2 rounded-full" style="width: ${percentage}%"></div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="bg-white border rounded-xl p-6 mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Respostas Detalhadas</h4>
                    <div class="space-y-4">
                        ${questions.map((q, index) => {
                            const answer = test.answers[index];
                            const selectedOption = q.options.find(opt => opt.profile === answer);
                            return `
                                <div class="border-l-4 border-${profileDescriptions[answer].color}-400 pl-4">
                                    <p class="font-medium text-gray-800 mb-1">${index + 1}. ${q.question}</p>
                                    <p class="text-gray-600">${selectedOption.text}</p>
                                    <span class="inline-block mt-1 px-2 py-1 text-xs rounded-full bg-${profileDescriptions[answer].color}-100 text-${profileDescriptions[answer].color}-800">
                                        ${profileDescriptions[answer].title}
                                    </span>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-${profile.color}-50 to-${profile.color}-100 rounded-xl p-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Recomendações Personalizadas</h4>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h5 class="font-medium text-gray-800 mb-2">Carreiras Sugeridas:</h5>
                            <ul class="text-sm text-gray-700 space-y-1">
                                ${profile.careers.slice(0, 4).map(career => `
                                    <li><i class="fas fa-check text-${profile.color}-600 mr-2"></i>${career}</li>
                                `).join('')}
                            </ul>
                        </div>
                        <div>
                            <h5 class="font-medium text-gray-800 mb-2">Próximos Passos:</h5>
                            <ul class="text-sm text-gray-700 space-y-1">
                                ${profile.nextSteps.slice(0, 3).map(step => `
                                    <li><i class="fas fa-arrow-right text-${profile.color}-600 mr-2"></i>${step}</li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('reportModal').classList.remove('hidden');
        }

        function closeReportModal() {
            document.getElementById('reportModal').classList.add('hidden');
        }

        function deleteTest(testId) {
            if (confirm('Tem certeza que deseja excluir este teste?')) {
                allTests = allTests.filter(test => test.id !== testId);
                localStorage.setItem('vocationalTests', JSON.stringify(allTests));
                loadAdminData();
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load sample data if no tests exist
            if (allTests.length === 0) {
                const sampleTests = [
                    {
                        id: 1,
                        nome: "Ana Silva",
                        idade: 17,
                        sexo: "feminino",
                        telefone: "(11) 99999-9999",
                        email: "ana@email.com",
                        primaryProfile: "humanas",
                        scores: { exatas: 2, humanas: 7, biologicas: 2, artes: 1 },
                        date: new Date(Date.now() - 86400000).toISOString()
                    },
                    {
                        id: 2,
                        nome: "João Santos",
                        idade: 18,
                        sexo: "masculino",
                        telefone: "(11) 88888-8888",
                        email: "joao@email.com",
                        primaryProfile: "exatas",
                        scores: { exatas: 8, humanas: 1, biologicas: 2, artes: 1 },
                        date: new Date(Date.now() - 172800000).toISOString()
                    },
                    {
                        id: 3,
                        nome: "Maria Oliveira",
                        idade: 16,
                        sexo: "feminino",
                        telefone: "(11) 77777-7777",
                        email: "maria@email.com",
                        primaryProfile: "biologicas",
                        scores: { exatas: 1, humanas: 2, biologicas: 8, artes: 1 },
                        date: new Date().toISOString()
                    }
                ];
                
                allTests = sampleTests;
                localStorage.setItem('vocationalTests', JSON.stringify(allTests));
            }
        });
    </script>
</body>
</html>
